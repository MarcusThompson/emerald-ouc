////
/// @group uthsc-off-canvas
////

/// Width of an off-canvas menu.
/// @type Number
$uthsc-offcanvas-size: 300px !default;

/// Background color of an off-canvas menu.
/// @type Color
$uthsc-offcanvas-background: $light-gray !default;

/// Length of the animation on an off-canvas menu.
/// @type Number
$uthsc-offcanvas-transition-length: 0.3s !default;

/// Timing function of the animation on an off-canvas menu.
/// @type Keyword
$uthsc-offcanvas-transition-timing: ease !default;

/// Background color for the overlay that appears when an off-canvas menu is open.
/// @type Color
$uthsc-offcanvas-exit-background: rgba($white, 0.25) !default;

/// CSS class used for the main content area. The off-canvas mixins use this to target the page body.
$uthsc-maincontent-class: 'off-canvas-content' !default;

/// Box shadow to place under the main content area. This shadow overlaps the off-canvas menus.
/// @type Shadow
$uthsc-maincontent-shadow: 0 0 10px rgba($black, 0.5) !default;

/// Adds baseline styles for off-canvas. This CSS is required to make the other pieces work.
@mixin uthsc-off-canvas-basics {

  // Inspired by http://callmenick.com/2014/03/26/slide-and-push-menus-with-css3-transitions/
  .uthsc-off-canvas-wrapper {
    position: relative;
    z-index: 10;
    top: 0;
    left: 0;
    -webkit-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
    -moz-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
    -ms-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
    -o-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
    transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;

    //Foundation styles
    //width: 100%;
    //overflow-x: hidden;
    //backface-visibility: hidden;
    //-webkit-overflow-scrolling: touch;
  }

  .uthsc-off-canvas-wrapper-inner {
    @include clearfix;
    //position: relative;
    //width: 100%;
    //transition: transform $uthsc-offcanvas-transition-length $uthsc-offcanvas-transition-timing;
  }

  // Container for page content
  .uthsc-off-canvas-content {
    //min-height: 100%;
    //background: $body-background;
    //transition: transform $uthsc-offcanvas-transition-length $uthsc-offcanvas-transition-timing;
    //backface-visibility: hidden;
    //z-index: 1;
    //
    //@if has-value($maincontent-shadow) {
    //  box-shadow: $maincontent-shadow;
    //}
  }

  // Click-to-exit overlay (generated by JavaScript)
  .uthsc-js-off-canvas-exit {
    //display: none;
    //position: absolute;
    //top: 0;
    //left: 0;
    //width: 100%;
    //height: 100%;
    //background: $offcanvas-exit-background;
    //cursor: pointer;
    //transition: background $uthsc-offcanvas-transition-length $uthsc-offcanvas-transition-timing;

    .is-off-canvas-open & {
      //display: block;
    }
  }
}

/// Adds basic styles for an off-canvas menu.
@mixin uthsc-off-canvas-base {
  @include disable-mouse-outline;
  //position: absolute;
  //background: $offcanvas-background;
  //z-index: $offcanvas-zindex;
  //max-height: 100%;
  //overflow-y: auto;
  //transform: translateX(0px);
}

@mixin uthsc-off-canvas-position(
  $position: left,
  $size: $offcanvas-size,
  $fixed: false
) {
  @if $position == left {
    //left: -$size;
    //top: 0;
    //width: $size;
  }
  @else if $position == right {
    //right: -$size;
    //top: 0;
    //width: $size;
  }

  // Generates an open state class that matches the width of the menu
  @at-root {
    .is-open-#{$position} {
      @if $position == left {
        //transform: translateX($size);
      }
      @else if $position == right {
        //transform: translateX(-$size);
      }
    }
  }
}

@mixin uthsc-off-canvas-position-open(
  $position: left,
  $size: $offcanvas-size
) {

  // Prevent page from scrolling when
  // off canvas is activated
  .uthsc-off-canvas-wrapper {
    position: fixed;
    width: 100%;
  }

  @if $position == left {
    .uthsc-off-canvas-wrapper { left: $size; }
    .offcanvas-nav.push-menu-left {
      left: 0;
      position: absolute;
    }
  }

  @else if $position == right {
    .uthsc-off-canvas-wrapper { left: -$size; }
    .offcanvas-nav.push-menu-right {
      right: 0;
      position: absolute;
    }
  }
}

@mixin uthsc-off-canvas {

  @include uthsc-off-canvas-basics;

  // Off-canvas container
  .uthsc-off-canvas {
    @include uthsc-off-canvas-base;
  }

  .mask {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 15;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
  }

  .pmr-open { @include uthsc-off-canvas-position-open(right) }
  .pml-open { @include uthsc-off-canvas-position-open(left) }

  .offcanvas-nav {

    &.menu {
      position: fixed;
      z-index: 20;
      background-color: lighten(#ececec, 5%);
      overflow: auto;
      overflow-x: hidden;
      -webkit-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
      -moz-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
      -ms-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
      -o-transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
      transition: $uthsc-offcanvas-transition-timing $uthsc-offcanvas-transition-length;
      min-height: 100%;
    }

    &.push-menu-left,
    &.push-menu-right {
      width: $uthsc-offcanvas-size;
      max-width: 86%;
    }

    &.push-menu-left {
      left: -$uthsc-offcanvas-size;
    }
    &.push-menu-right {
      right: -$uthsc-offcanvas-size;
    }
  }
}
